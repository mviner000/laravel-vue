import{G as g,o as l,g as n,b as e,f,j as m,C as u,H as _,t as i,h as p,F as b,I as y,D as x,E as w}from"./app-D0c1QNNP.js";import{d as h,r as v}from"./relativeTime-Bsylc4h4.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";h.extend(v);const k={data(){return{products:[],loading:!1,error:null,success:null,formData:{name:"",barcode:"",quantity:0,description:"",selling_price:0,grocery_price:0,image:null},uploadProgress:0}},mounted(){this.fetchProducts();const s=document.createElement("script");s.src="https://upload-widget.cloudinary.com/global/all.js",s.type="text/javascript",s.async=!0,document.head.appendChild(s),s.onload=()=>{cloudinary.createUploadWidget({cloudName:"dqpzvvd0v",uploadPreset:"mrpfvufw"},(t,a)=>{!t&&a&&a.event==="success"&&(console.log("Upload successful! Here is the result:",a.info),this.formData.image=a.info.secure_url)})}},methods:{fetchProducts(){this.loading=!0,g.get("/api/products").then(s=>{this.products=s.data.results.sort((t,a)=>new Date(a.created_at)-new Date(t.created_at)),this.loading=!1}).catch(s=>{console.error("Error fetching products:",s),this.error="Failed to fetch products",this.loading=!1})},formatTimeAgo(s){return h(s).fromNow()},createProduct(){this.loading=!0;const s=new FormData;s.append("name",this.formData.name),s.append("barcode",this.formData.barcode),s.append("quantity",this.formData.quantity),s.append("description",this.formData.description),s.append("selling_price",this.formData.selling_price),s.append("grocery_price",this.formData.grocery_price),s.append("image",this.formData.image),g.post("/api/addnewproduct",s,{onUploadProgress:t=>{this.uploadProgress=t.loaded/t.total*100}}).then(t=>{this.success=t.data.message,this.loading=!1,this.resetForm(),this.fetchProducts()}).catch(t=>{console.error(t),this.error="Failed to create product",this.loading=!1,this.uploadProgress=0})},deleteProduct(s){confirm("Are you sure you want to delete this product?")&&g.delete(`/api/productsdelete/${s}`).then(t=>{this.products=this.products.filter(a=>a.id!==s),console.log(t.data.message),window.location.reload()}).catch(t=>{console.error(t)})},onFileChange(s){this.formData.image=s.target.files[0]},resetForm(){this.formData={name:"",barcode:"",quantity:0,description:"",selling_price:0,grocery_price:0,image:null},document.getElementById("image").value=""}}},d=s=>(x("data-v-5808faf9"),s=s(),w(),s),P={class:"card"},C={class:"p-6"},q=d(()=>e("div",{class:"mb-4"},[e("h2",{class:"text-xl font-bold"},"Upload")],-1)),F=d(()=>e("h2",{class:"text-2xl font-bold mb-4"},"Create New Product",-1)),U={class:"mb-4"},V=d(()=>e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Name:",-1)),I={class:"mb-4"},S=d(()=>e("label",{for:"barcode",class:"block text-sm font-medium text-gray-700"},"Barcode:",-1)),N={class:"mb-4"},B=d(()=>e("label",{for:"quantity",class:"block text-sm font-medium text-gray-700"},"Quantity:",-1)),j={class:"mb-4"},A=d(()=>e("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description:",-1)),E={class:"mb-4"},T=d(()=>e("label",{for:"selling_price",class:"block text-sm font-medium text-gray-700"},"Selling Price:",-1)),G={class:"mb-4"},L=d(()=>e("label",{for:"grocery_price",class:"block text-sm font-medium text-gray-700"},"Grocery Price:",-1)),M={class:"mb-4"},z=d(()=>e("label",{for:"image",class:"block text-sm font-medium text-gray-700"},"Image:",-1)),H=["disabled"],Q={key:0,class:"w-full bg-gray-200 rounded-full dark:bg-gray-700 mt-4"},W={class:"hidden"},J={key:1,class:"text-green-600 mt-2"},K={key:2,class:"text-red-600 mt-2"},O=d(()=>e("h2",{class:"text-2xl font-bold mb-4"},"Product List",-1)),R={class:"w-full"},X=d(()=>e("thead",null,[e("tr",null,[e("th",{class:"px-4 py-2"},"Name"),e("th",{class:"px-4 py-2"},"Barcode"),e("th",{class:"px-4 py-2"},"Quantity"),e("th",{class:"px-4 py-2"},"Description"),e("th",{class:"px-4 py-2"},"Selling Price"),e("th",{class:"px-4 py-2"},"Grocery Price"),e("th",{class:"px-4 py-2"},"Product Created"),e("th",{class:"px-4 py-2"},"Image"),e("th",{class:"px-4 py-2"},"Actions")])],-1)),Y={class:"border px-4 py-2"},Z={class:"border px-4 py-2"},$={class:"border px-4 py-2"},ee={class:"border px-4 py-2"},te={class:"border px-4 py-2"},se={class:"border px-4 py-2"},oe={class:"border px-4 py-2"},re={class:"border px-4 py-2"},ie=["src"],de={class:"border px-4 py-2"},ae=["onClick"],le={class:"card mt-8"},ne={key:0,class:"text-gray-700 mt-2"},ce={key:1,class:"text-red-600 mt-2"};function me(s,t,a,ue,r,c){return l(),n("div",P,[e("div",C,[q,F,e("form",{onSubmit:t[7]||(t[7]=f((...o)=>c.createProduct&&c.createProduct(...o),["prevent"])),class:"mb-8"},[e("div",U,[V,m(e("input",{type:"text",id:"name","onUpdate:modelValue":t[0]||(t[0]=o=>r.formData.name=o),required:"",class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[u,r.formData.name]])]),e("div",I,[S,m(e("input",{type:"text",id:"barcode","onUpdate:modelValue":t[1]||(t[1]=o=>r.formData.barcode=o),class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[u,r.formData.barcode]])]),e("div",N,[B,m(e("input",{type:"number",id:"quantity","onUpdate:modelValue":t[2]||(t[2]=o=>r.formData.quantity=o),class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[u,r.formData.quantity,void 0,{number:!0}]])]),e("div",j,[A,m(e("textarea",{id:"description","onUpdate:modelValue":t[3]||(t[3]=o=>r.formData.description=o),class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[u,r.formData.description]])]),e("div",E,[T,m(e("input",{type:"number",id:"selling_price","onUpdate:modelValue":t[4]||(t[4]=o=>r.formData.selling_price=o),class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[u,r.formData.selling_price,void 0,{number:!0}]])]),e("div",G,[L,m(e("input",{type:"number",id:"grocery_price","onUpdate:modelValue":t[5]||(t[5]=o=>r.formData.grocery_price=o),class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[u,r.formData.grocery_price,void 0,{number:!0}]])]),e("div",M,[z,e("input",{type:"file",id:"image",accept:"image/*",onChange:t[6]||(t[6]=(...o)=>c.onFileChange&&c.onFileChange(...o)),class:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,32)]),e("button",{type:"submit",disabled:r.loading,class:"bg-indigo-600 text-white px-4 py-2 rounded-md disabled:opacity-50"},"Create Product",8,H),r.loading?(l(),n("div",Q,[e("div",{class:"bg-blue-600 text-xs font-medium text-blue-100 text-center p-0.5 leading-none rounded-full",style:_({width:r.uploadProgress+"%",height:"20px",transition:"width 1s linear"})},[e("span",W,i(Math.round(r.uploadProgress))+"%",1)],4)])):p("",!0),r.success?(l(),n("div",J,i(r.success),1)):p("",!0),r.error?(l(),n("div",K,i(r.error),1)):p("",!0)],32),O,e("table",R,[X,e("tbody",null,[(l(!0),n(b,null,y(r.products,o=>(l(),n("tr",{key:o.id},[e("td",Y,i(o.name),1),e("td",Z,i(o.barcode),1),e("td",$,i(o.quantity),1),e("td",ee,i(o.description),1),e("td",te,i(o.selling_price),1),e("td",se,i(o.grocery_price),1),e("td",oe,i(c.formatTimeAgo(o.created_at)),1),e("td",re,[e("img",{src:o.image_url,alt:"Product Image",class:"w-24 h-auto"},null,8,ie)]),e("td",de,[e("button",{onClick:pe=>c.deleteProduct(o.id),class:"bg-red-600 text-white px-2 py-1 rounded-md"},"Delete",8,ae)])]))),128))])]),e("div",le,[r.loading?(l(),n("div",ne,"Loading...")):p("",!0),r.error?(l(),n("div",ce,i(r.error),1)):p("",!0)])])])}const _e=D(k,[["render",me],["__scopeId","data-v-5808faf9"]]);export{_e as default};
